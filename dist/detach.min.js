!function(t,e){"use strict";"function"==typeof define&&define.amd?define("Detach",[],function(){return e()}):"object"==typeof exports?module.exports.Detach=e():t.Detach=e()}("undefined"!=typeof window?window:this,function(){function t(t){return Array.prototype.slice.call(t)}function e(e){var n=document.createElement("div");return n.innerHTML=e,t(n.children)}function n(e){("[object Array]"===Object.prototype.toString.call(e)?t(e):e).forEach(function(t){t.style.setProperty("display","none")})}function o(t){var o=t.tpl,i=t.container||document.body,s=t.data||{},a=t.onReady||function(){};!function(t,e){var n=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");n.open("GET",t+"?"+(new Date).getTime(),!0),n.onload=function(){if(200!==n.status&&206!==n.status&&304!==n.status)throw new Error("load template error");e(n.responseText)},n.onerror=function(){throw new Error("ajax error")},n.send()}(o,function(t){var o=null,u=null,d=null,l=null,f=document.documentElement.querySelector("head"),p=document.body,h=[],m=[];u=e(t.replace(/((<link[\s\S]*?\/?>)|(<style[\s\S]*?>[\s\S]*?<\/style>))/gi,function(t,e){return h.push(t),""}).replace(/(<script[\s\S]*?>[\s\S]*?<\/script>)/gi,function(t){return m.push(t),""}).replace(/\{\{([\s\S]*?)\}\}/gi,function(t,e){return void 0===s[e]?"":s[e]})),d=e(h.join("")),l=e(m.join("")),o=document.createDocumentFragment(),d.forEach(function(t){t.classList.add(r),o.appendChild(t)}),f.appendChild(o),n(u),o=document.createDocumentFragment(),u.forEach(function(t){t.classList.add(c),t.classList.add(r),o.appendChild(t)}),i.appendChild(o),a(),setTimeout(function(){o=document.createDocumentFragment(),function(t){var e=[];return t.forEach(function(t){var n=document.createElement("script"),o=t.getAttribute("src");n.type="text/javascript",o?(n.src=o,e.push(n)):(n.innerHTML=t.innerHTML,e.push(n))}),e}(l).forEach(function(t){t.classList.add(r),o.appendChild(t)}),p.appendChild(o)})})}var i=function(){this.cList={},this.dList=[],this.tList={},this.db={}},r="",c="";return i.prototype.init=function(t){i.self=this;var e=(new Date).getTime();this.cList[t.name]=void 0===t.controller?function(){}:t.controller,this.tList[t.name]=r="detach_"+e,this.dList[t.name]=c="dom_"+e,o(t)},i.prototype.destroy=function(e){t(document.querySelectorAll("."+this.tList[e.name])).forEach(function(t){t.parentNode.removeChild(t)}),delete this.cList[e.name],delete this.dList[e.name],delete this.tList[e.name]},i.prototype.router={push:function(e){var n=i.self.dList[e.name];if(n){!function(e){t(e).forEach(function(t){t.style.removeProperty("display","none")})}(t(document.querySelectorAll("."+n))),i.self.cList[e.name]()}},delete:function(e){var o=i.self.dList[e.name];if(o){var r=t(document.querySelectorAll("."+o));r&&n(r)}}},i.prototype.sub=function(t,e){this.db[t]=e},i.prototype.pub=function(t,e){var n=this.db[t];void 0!==n&&n(e)},new i});